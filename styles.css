/* --- VARIAVEIS GERAIS  --- */
:root {
   /* Cores de Ação */
   --primary: #495057;
   /* Cinza Chumbo para botões */
   --primary-hover: #343a40;
   /* Cinza mais escuro para hover */

   /* Cores de Fundo */
   --bg-page: #f3f4f6;
   /* Cinza muito suave para o fundo da página */
   --bg-card: #ffffff;
   /* Branco para os cards */
   --bg-input: #f8f9fa;

   /* Cores de Texto */
   --text-main: #343a40;
   --text-muted: #6c757d;

   /* Cores de Destaque (Sarrus) */
   --accent-pos: #6366f1;
   /* Indigo suave */
   --accent-neg: #f97316;
   /* Laranja suave */
   --bg-pos-light: #e0e7ff;
   /* Fundo destaque positivo */
   --bg-neg-light: #fff7ed;
   /* Fundo destaque negativo */

   /* Feedback */
   --success: #198754;
   --danger: #dc3545;
}

body {
   font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
   background-color: var(--bg-page);
   color: var(--text-main);
}

/* --- ESTILIZAÇÃO DOS CARDS --- */
.card {
   border: none;
   border-radius: 12px;
   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
   background-color: var(--bg-card);
   margin-bottom: 20px;
}

.card-header {
   background-color: transparent;
   border-bottom: 1px solid #f0f0f0;
   padding: 15px 20px;
}

.card-body {
   padding: 25px;
}

/* Textos do cabeçalho */
.app-card-head .title {
   font-weight: 600;
   font-size: 0.9rem;
   color: var(--text-main);
}

.app-card-head .subtitle {
   font-size: 0.75rem;
   color: var(--text-muted);
}

/* Badge (Etiqueta do lado direito) */
.app-card-badge {
   font-size: 0.7rem;
   font-weight: 600;
   padding: 4px 8px;
   border-radius: 12px;
   background-color: #e9ecef;
   color: var(--text-muted);
   text-transform: uppercase;
   letter-spacing: 0.5px;
}

/* Corpo do conteúdo */
.app-card-body {
   padding: 15px;
   font-size: 0.9rem;
   color: var(--text-main);
   animation: fadeIn 0.3s ease-in;
}


/* O container do card */
details.app-card {
   border: 1px solid #e9ecef;
   border-radius: 8px;
   margin-bottom: 10px;
   background: #fff;
   transition: all 0.3s ease;
   overflow: hidden;
}

details.app-card[open] {
   box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03);
   border-color: #dee2e6;
}

/* O Cabeçalho clicável (Summary) */
summary.app-card-summary {
   list-style: none;
   cursor: pointer;
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 12px 15px;
   background-color: #fff;
   transition: background-color 0.2s;
}

summary.app-card-summary::-webkit-details-marker {
   display: none;
}

/* Efeito hover no cabeçalho */
summary.app-card-summary:hover {
   background-color: #f8f9fa;
}

/* Quando está aberto, muda a cor do fundo do cabeçalho */
details.app-card[open] summary.app-card-summary {
   background-color: #f8f9fa;
   border-bottom: 1px solid #f0f0f0;
}

/* --- INPUTS E BOTÕES --- */
.matrix-input {
   width: 65px;
   height: 50px;
   font-size: 1.2rem;
   border: 1px solid #e9ecef;
   background-color: var(--bg-input);
   border-radius: 8px;
   color: var(--text-main);
   transition: border-color 0.2s, box-shadow 0.2s;
}

.matrix-input:focus {
   border-color: var(--text-muted);
   box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.2);
   outline: none;
}

.btn-primary {
   background-color: var(--primary);
   border-color: var(--primary);
   padding: 12px;
   font-weight: 600;
   letter-spacing: 0.5px;
   border-radius: 8px;
   transition: all 0.3s;
}

.btn-primary:hover,
.btn-primary:focus {
   background-color: var(--primary-hover);
   border-color: var(--primary-hover);
   box-shadow: 0 4px 12px rgba(73, 80, 87, 0.3);
}

/* --- SARRUS VISUALIZATION --- */
.sarrus-wrap {
   position: relative;
   display: flex;
   justify-content: center;
   align-items: center;
   min-height: 240px;
   padding: 20px 0;
}

.sarrus-grid {
   display: grid;
   grid-template-columns: repeat(5, 65px);
   gap: 8px;
   justify-content: center;
   position: relative;
   z-index: 2;
   top: 0;
   left: 0;
}

.cell {
   width: 65px;
   height: 65px;
   display: flex;
   align-items: center;
   justify-content: center;
   background: var(--bg-card);
   border: 1px solid #e9ecef;
   border-radius: 8px;
   font-weight: 700;
   font-size: 1.2em;
   color: var(--text-main);
   transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
   z-index: 1;
}

.cell.dup {
   background-color: #f8f9fa;
   color: #adb5bd;
   border: 1px dashed #dee2e6;
}

/* --- ANIMAÇÃO E DESTAQUES --- */
.cell.highlight-diag-pos {
   background-color: var(--bg-pos-light) !important;
   border-color: var(--accent-pos);
   color: var(--accent-pos);
   box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
   transform: scale(1.15);
   z-index: 10;
}

.cell.highlight-diag-neg {
   background-color: var(--bg-neg-light) !important;
   border-color: var(--accent-neg);
   color: var(--accent-neg);
   box-shadow: 0 0 15px rgba(249, 115, 22, 0.4);
   transform: scale(1.15);
   z-index: 10;
}

/* Setas SVG */
#arrowsSvg {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: 5;
   pointer-events: none;
   overflow: visible;
   left: 0;
   top: 0;
   pointer-events: none;
}

#arrowsSvg line {
   transition: all 0.3s;
   stroke-linecap: round;
}

/* --- LEGENDA --- */
.legend-container {
   display: flex;
   justify-content: center;
   gap: 20px;
   margin-top: 15px;
   padding-top: 15px;
   border-top: 1px solid #f0f0f0;
}

.legend-item {
   display: flex;
   align-items: center;
   font-size: 0.9rem;
   color: var(--text-muted);
   font-weight: 500;
}

.legend-dot {
   display: inline-block;
   width: 12px;
   height: 12px;
   border-radius: 50%;
   margin-right: 8px;
}

/* --- EXTRAS E HELPERS --- */
.strong-plain {
   font-weight: 600;
   color: var(--text-main);
}

.text-error {
   color: var(--danger);
   font-size: 0.85em;
   margin-top: 5px;
}

/* Painel Lateral (App Cards) */
.app-box {
   background: #fff;
   border: 1px solid #e9ecef;
   border-radius: 8px;
   transition: transform 0.2s;
}

.app-box:hover {
   transform: translateY(-2px);
   border-color: #dee2e6;
}

h4 {
   font-size: 1.1rem;
   text-transform: uppercase;
   letter-spacing: 1px;
}

#stepsContainer {
   display: none;
}

#calculo-detalhado {
   min-height: 80px;
}

#legendaPositiva {
   background: var(--accent-pos)
}

#legendaNegativa {
   background: var(--accent-neg)
}

#applications-panel {
   display: none;
}

#current_det_value {
   background: transparent;
   padding: 0;
}

/* Animação de entrada */
#applications-panel {
   animation: fadeInSlide 0.6s ease-out forwards;
}

@keyframes fadeInSlide {
   from {
      opacity: 0;
      transform: translateY(20px);
   }

   to {
      opacity: 1;
      transform: translateY(0);
   }
}

@keyframes fadeIn {
   from {
      opacity: 0;
   }

   to {
      opacity: 1;
   }
}

@media (min-width: 768px) {
   .col-separator {
      position: relative;
      padding-left: 50px !important;
      margin-left: 0;
   }

   /* A Linha Estilizada */
   .col-separator::before {
      content: "";
      position: absolute;
      left: 0;
      top: 10%;
      bottom: 10%;
      width: 1px;

      background: linear-gradient(to bottom,
            rgba(0, 0, 0, 0),
            rgba(0, 0, 0, 0.2),
            rgba(0, 0, 0, 0));
   }
}